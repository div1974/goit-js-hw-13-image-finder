{"version":3,"sources":["webpack:///./fetchimg.js","webpack:///./index.js"],"names":["page","query","per_page","fetchImg","callback","reqParam","this","fetch","then","res","ok","json","Promise","reject","d","catch","err","console","warn","error","text","delay","str","resetPage","debounce","require","document","querySelector","insertAdjacentHTML","searchResult","oninput","e","input","value","innerHTML","fetchImages","searchQuery","onGetData","elements","data","imgArray","images","compile","template","domChildrenLength","children","length","top","getBoundingClientRect","setTimeout","scrollTo","window","pageYOffset","behavior","querySelectorAll","forEach","entry","addEventListener","event","preventDefault","bigImg","hits","filter","previewURL","target","src","basicLightbox","largeImageURL","show","printCountriesList"],"mappings":"qMAMe,G,oBAAA,CACXA,KAAM,EACNC,MAAM,GACNC,SAAS,GACTC,SAJW,SAIFC,GAAS,WAKZC,EAAW,qFAA0DC,KAAKL,MAAlE,SAAgFK,KAAKN,KAArF,aAAsGM,KAAKJ,SAErHK,MAbS,+DAaQF,GAChBG,MAAK,SAAAC,GAEF,OAAIA,EAAIC,IAEJ,EAAKV,MAAO,EAELS,EAAIE,QAIJC,QAAQC,OAAOJ,MAG7BD,MAAK,SAAAM,GAEFV,EAASU,MACZC,OAAM,SAAAC,GACHC,QAAQC,KAAK,gCAEGC,gBAAM,CAClBC,KAAM,gDACNC,MAAO,UAInB,kBACI,OAAOf,KAAKL,OAEhB,gBAAgBqB,GACZhB,KAAKL,MAAQqB,GAGjBC,UA5CW,WA8CPjB,KAAKN,KAAO,K,YCnDhBwB,G,UAAWC,EAAQ,SAQvBC,SAASC,cAAc,UAAUC,mBAC/B,aADF,6JAaA,IAAMC,EAAeH,SAASC,cAAc,YACtCG,EAAUN,GAMhB,SAAoBO,GACE,KAAhBC,EAAMC,QACRJ,EAAaK,UAAY,GACzBC,EAAYZ,YACZY,EAAYC,YAAcJ,EAAMC,MAEhCE,EAAYhC,SAASkC,MAZY,MAC/BL,EAAQN,SAASC,cAAc,gBAAgBW,SAASrC,MAe9D,SAASoC,EAAUE,IAUnB,SAA4BC,GAC1B,IAgCMC,EAhCahB,EAAQ,QACCiB,QAAX,y3BA+BFC,CAASH,GAExBX,EAAaD,mBAAmB,YAAaa,GAE7C,IAAMG,EAAoBlB,SAASC,cAAc,YAAYkB,SAASC,OAChEC,EAAMrB,SACTC,cAAc,YACdkB,SAASD,EAAoBT,EAAYjC,UAAU8C,wBACnDD,IAEHE,YAAW,WACTC,SAAS,CACPH,IAAKA,EAAMI,OAAOC,YAClBC,SAAU,aAEX,MAEc3B,SAAS4B,iBAAiB,oBAElCC,SAAQ,SAAUC,GACzBA,EAAMC,iBAAiB,SAAS,SAAUC,GACxCA,EAAMC,iBAEN,IAAMC,EAASpB,EAASqB,KAAKC,QAAO,SAAA/B,GAClC,OAAOA,EAAEgC,aAAeL,EAAMM,OAAOC,OAGtBC,SAAA,wBAERN,EAAO,GAAGO,cAFF,sCAMRC,aA3EbC,CAAmB9B,GAfrBP,EAAMyB,iBAAiB,QAAS3B,GACZJ,SAASC,cAAc,mCAC/B8B,iBAAiB,SAgB7B,WACsB,KAAhBzB,EAAMC,OACRE,EAAYhC,SAASkC,Q","file":"main.15f41f8dc44de0f1717b.js","sourcesContent":["import { error } from '@pnotify/core';\r\nimport '@pnotify/core/dist/BrightTheme.css'\r\nimport '@pnotify/core/dist/PNotify.css';\r\n\r\nconst mainAddr = 'https://cors-anywhere.herokuapp.com/https://pixabay.com/api/'\r\n\r\nexport default {\r\n    page: 1,\r\n    query:'',\r\n    per_page:12,\r\n    fetchImg(callback){\r\n    \r\n        \r\n    \r\n    const Auth ='16947860-09cbfc9ac0ccf00e2776d07e9';\r\n    const reqParam = `?key=${Auth}&image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=${this.per_page}`;\r\n        \r\n        fetch(mainAddr + reqParam)\r\n        .then(res=>{\r\n           \r\n            if (res.ok){\r\n           \r\n                this.page +=1;\r\n           \r\n                return res.json();\r\n            }\r\n            else {\r\n            \r\n                return Promise.reject(res)\r\n            }\r\n        })\r\n        .then(d=>{\r\n            \r\n            callback(d)})\r\n        .catch(err=>{\r\n            console.warn('No found any data.Error 404.');\r\n            \r\n            const myError = error({\r\n                text: \"No matches found. Please enter another query!\",\r\n                delay: 2000\r\n              });\r\n        });\r\n    },\r\n    get searchQuery(){\r\n        return this.query;\r\n    },\r\n    set searchQuery(str){\r\n        this.query = str;\r\n    },\r\n\r\n    resetPage(){\r\n        \r\n        this.page = 1; \r\n    }\r\n}\r\n","import './styles.css';\nvar debounce = require('lodash.debounce');\nimport fetchImages from './fetchimg.js';\nimport { error } from '@pnotify/core';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport '@pnotify/core/dist/PNotify.css';\nimport * as basicLightbox from 'basiclightbox';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n\ndocument.querySelector('.intro').insertAdjacentHTML(\n  'afterbegin',\n  `\n<form class=\"search-form\" id=\"search-form\">\n<input\n  type=\"text\"\n  name=\"query\"\n  autocomplete=\"off\"\n  placeholder=\"Search images...\"\n/>\n</form>`,\n);\n\nconst searchResult = document.querySelector('.gallery');\nconst oninput = debounce(searchData, 1500);\nconst input = document.querySelector('.search-form').elements.query;\ninput.addEventListener('input', oninput);\nconst LoadMoreBtn = document.querySelector('button[data-action=\"Load-more\"]');\nLoadMoreBtn.addEventListener('click', LoadMoreBtnAction);\n\nfunction searchData(e) {\n  if (input.value !== '') {\n    searchResult.innerHTML = '';\n    fetchImages.resetPage();\n    fetchImages.searchQuery = input.value;\n\n    fetchImages.fetchImg(onGetData);\n  }\n}\n\nfunction onGetData(data) {\n  printCountriesList(data);\n}\n\nfunction LoadMoreBtnAction() {\n  if (input.value !== '') {\n    fetchImages.fetchImg(onGetData);\n  }\n}\n\nfunction printCountriesList(imgArray) {\n  const Handlebars = require('handlebars');\n  const template = Handlebars.compile(`\n\n\n  {{#each this.hits}}\n    <li class=\"gallery__item\" >\n    \n    <div class=\"photo-card\">\n  <img src=\"{{previewURL}}\" alt=\"\" style='width:110px; height:90px'/>\n\n  <div class=\"stats\">\n    <p class=\"stats-item\" style='display:flex'>\n      <i class=\"material-icons\">thumb_up</i><span style='font-size:14px'>{{likes}}</span>\n    </p>\n    <p class=\"stats-item\" style='display:flex'>\n      <i class=\"material-icons\">visibility</i><span style='font-size:14px'>{{views}}</span>\n    </p>\n    <p class=\"stats-item\" style='display:flex'>\n      <i class=\"material-icons\">comment</i><span style='font-size:14px'>{{comments}}</span>\n    </p>\n    <p class=\"stats-item\" style='display:flex'>\n      <i class=\"material-icons\">cloud_download</i><span style='font-size:14px'>{{downloads}}</span>\n    </p>\n  </div>\n</div>\n    </li>\n    {{/each}}\n    \n  \n  \n  `);\n\n  const images = template(imgArray);\n\n  searchResult.insertAdjacentHTML('beforeend', images);\n\n  const domChildrenLength = document.querySelector('.gallery').children.length;\n  const top = document\n    .querySelector('.gallery')\n    .children[domChildrenLength - fetchImages.per_page].getBoundingClientRect()\n    .top;\n\n  setTimeout(() => {\n    scrollTo({\n      top: top + window.pageYOffset,\n      behavior: 'smooth',\n    });\n  }, 1500);\n\n  const imgItems = document.querySelectorAll('.photo-card >img');\n\n  imgItems.forEach(function (entry) {\n    entry.addEventListener('click', function (event) {\n      event.preventDefault();\n\n      const bigImg = imgArray.hits.filter(e => {\n        return e.previewURL === event.target.src;\n      });\n\n      const instance = basicLightbox.create(`\n    \n    <img src=${bigImg[0].largeImageURL} width=\"800\" height=\"600\">\n    \n`);\n\n      instance.show();\n    });\n  });\n}\n\nfunction printError(obj) {\n  searchResult.innerHTML = '';\n\n  const myError = error({\n    text: 'Too many matches found. Please enter more specific query!',\n    delay: 1500,\n  });\n}\n"],"sourceRoot":""}